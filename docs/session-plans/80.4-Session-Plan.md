# Session 80.4: DependencyManager + Page Wiring + Indicator

**Parent Plan**: `80-Session-Plan-Teaching.md`
**Target**: ~40-50k tokens
**Prerequisites**: Session 80.3 complete

---

## Scope

Assemble the UI, wire it into the Work Item detail page, and add the blocked indicator to cards.

1. **DependencyManager component**
2. **WorkItemDetail sidebar wiring**
3. **BlockedIndicator on Kanban cards**
4. **Unit tests and manual verification**

---

## Teaching Goals

- Compose smaller components into a cohesive UI.
- Handle loading, error, and offline states at the container level.
- Verify end-to-end behavior with targeted tests and manual checks.

---

## Implementation Order

### Step 1: Create DependencyManager

**File**: `frontend/ProjectManagement.Components/Dependencies/DependencyManager.razor`

Key behaviors:
- Calls `RefreshAsync` on parameter changes
- Subscribes to `OnChanged`
- Shows loading and error states
- Disables actions while offline or pending
- Opens `AddDependencyDialog` with parameters

Reference snippet in `docs/session-plans/80-Session-Plan-Initial.md`.

---

### Step 2: Wire into WorkItem Detail Page

**File**: `frontend/ProjectManagement.Wasm/Pages/WorkItemDetail.razor`

Place in sidebar between Details and Activity.

---

### Step 3: Add BlockedIndicator to Kanban Cards

**File**: `frontend/ProjectManagement.Components/WorkItems/KanbanCard.razor`

Use the existing indicator component and keep layout compact.

---

### Step 4: Add Tests

Tests to include:
- `DependencyManager` renders both sections
- `OnChanged` triggers re-render
- Offline state disables Add/Remove

---

### Step 5: Manual Verification

Use the manual checklist in `docs/session-plans/80-Session-Plan-Initial.md` (create/delete, Blocks vs Relates, offline behavior).

---

## Completion Checklist

- [ ] `DependencyManager` renders and updates from store changes
- [ ] WorkItem detail page shows Dependencies section
- [ ] BlockedIndicator appears on Kanban cards
- [ ] bUnit tests added and pass
- [ ] `just build-cs-components` passes
- [ ] `just test-cs-components` passes

---

## Wrap-Up

At this point, the dependency management UI is complete and ready for QA.
