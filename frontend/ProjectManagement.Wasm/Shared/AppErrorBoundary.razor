  @inherits ErrorBoundaryBase
  @inject ILogger<AppErrorBoundary> Logger
  
  @if (CurrentException is not null)
  {
      <div class="error-boundary">
          <div class="error-content">
              <RadzenIcon Icon="error" IconColor="var(--rz-danger)" Style="font-size: 3rem;" />
              <RadzenText TextStyle="TextStyle.H5" Text="Something went wrong" />
              <RadzenText TextStyle="TextStyle.Body1" Text="@GetUserFriendlyMessage()" />
              <RadzenButton Text="Try Again" Click="Recover" ButtonStyle="ButtonStyle.Primary" class="mt-3" />
          </div>
      </div>
  }
  else
  {
      @ChildContent
  }
  
  @code {
      protected override Task OnErrorAsync(Exception exception)
      {
          Logger.LogError(exception, "Unhandled error in component tree");
          return Task.CompletedTask;
      }
      
      private string GetUserFriendlyMessage()
      {
          return CurrentException switch
          {
              ConnectionException => "Unable to connect to the server. Please check your connection.",
              RequestTimeoutException => "The request timed out. Please try again.",
              CircuitOpenException => "Service temporarily unavailable. Please wait a moment.",
              ValidationException ve => ve.UserMessage,
              ServerRejectedException sre => sre.UserMessage,
              _ => "An unexpected error occurred. Please try again."
          };
      }
  }